<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='即使是在白苹果上，Boot Camp 的装机体验其实也没有想象中那么美好。'><title>喜闻乐见的 Boot Camp (Hackintosh) 踩坑集锦</title>

<link rel='canonical' href='https://blog.wrrrr.me/post/200601-hackintosh-bootcamp/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='喜闻乐见的 Boot Camp (Hackintosh) 踩坑集锦'>
<meta property='og:description' content='即使是在白苹果上，Boot Camp 的装机体验其实也没有想象中那么美好。'>
<meta property='og:url' content='https://blog.wrrrr.me/post/200601-hackintosh-bootcamp/'>
<meta property='og:site_name' content='Void Space'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2020-06-01T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2020-06-21T00:00:00&#43;00:00'/><meta property='og:image' content='https://blog.wrrrr.me/post/image/cover-image.png' />
<meta name="twitter:title" content="喜闻乐见的 Boot Camp (Hackintosh) 踩坑集锦">
<meta name="twitter:description" content="即使是在白苹果上，Boot Camp 的装机体验其实也没有想象中那么美好。"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://blog.wrrrr.me/post/image/cover-image.png' /><script>
    (function(d) {
      var config = {
        kitId: 'jvh6pxp',
        scriptTimeout: 3000,
        async: true
      },
      h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
    })(document);
  </script>
    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="https://blog.wrrrr.me" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>返回</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/post/200601-hackintosh-bootcamp/">
                
                    <img src="/post/image/cover-image.png" loading="lazy" alt="Featured image of post 喜闻乐见的 Boot Camp (Hackintosh) 踩坑集锦" />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <h2 class="article-title">
        <a href="/post/200601-hackintosh-bootcamp/">喜闻乐见的 Boot Camp (Hackintosh) 踩坑集锦</a>
    </h2>

    
    <h3 class="article-subtitle">
        即使是在白苹果上，Boot Camp 的装机体验其实也没有想象中那么美好。
    </h3>
    <footer class="article-time">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <time class="article-time--published">Jun 01, 2020</time>
    </footer></div>
</header>

    <section class="article-content">
    <p>自从年初使用了广为流传的 300 系主板的原生 NVRAM 解法，并且全面转换到 OpenCore 引导 macOS 之后，几乎已经忘了这台主机是一台 PC 了。偶尔出于娱乐和兼容的需求要用到 Windows，又苦于 Parallels Desktop 的订阅份额被自己的 MacBook Pro 用掉了，于是萌生了利用 Boot Camp 进行启动转换的想法，让这台 PC 向 Mac 更进一步。<del>既然要追求极致，那就贯彻到底咯～（什么烂梗）</del></p>
<p><strong>注意</strong>：这里所说的 Boot Camp 仅仅是指 <strong>启动转换</strong>，而不是用 Boot Camp 去安装 Windows。理论上这样做是可行的，但是 PC 毕竟不是 Mac，在硬盘数量、分区或者其他一些东西上有差别，会导致 Boot Camp 系统盘制作错误、安装错误等等玄学问题。</p>
<h2 id="用-opencore-引导有什么弊端">用 OpenCore 引导有什么弊端？</h2>
<p>正如 <a class="link" href="https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Configuration.pdf"  target="_blank" rel="noopener"
    >OpenCore 官方文档</a> 写得那样：</p>
<ul>
<li>不支持 MBR；</li>
<li>ACPI、NVRAM 和 SMBIOS 在 OpenCore 上的所有改动都会被一视同仁地应用到 Windows 上；</li>
<li>如果 config.plist 中的 UUID 填写的是随机生成的，而不是主板本身的，Windows 系统可能需要重新激活。</li>
</ul>
<p>但是反过来看，这些「弊端」其实是为了达到真正 Boot Camp 的使用体验而留下的，更加 <strong>一体化且无缝</strong>，毕竟真正的 Mac 设备并不需要两份不同的 ACPI、NVRAM 和 SMBIOS 不是吗？</p>
<h2 id="为什么不用-boot-menu-引导-windows">为什么不用 Boot Menu 引导 Windows？</h2>
<p>原因有很多：</p>
<ul>
<li>比如用 Boot Menu 引导绕过了 OpenCore 启动器，也就意味着放弃了 Boot Camp 的体验——在操作系统中实现启动切换；</li>
<li>比如做好了 ACPI 的系统判断，UUID 也填好了主板本身的值，那么用 OpenCore 引导的「副作用」就不那么显著了；</li>
<li>还比如有些<del>小倒霉蛋的</del>主板在使用 OpenCore 引导之后，可能会出现按 <kbd>F11</kbd> 卡在黑屏而不能进入 Boot Menu 或 BIOS 的情况，那么就别无选择，只能用 OpenCore 来引导 Windows 了。</li>
</ul>
<h2 id="折腾-boot-camp-的时候有那些坑">折腾 Boot Camp 的时候有那些坑？</h2>
<p>由于我本人的机器仅仅是单硬盘双系统（分区为简单的 <code>EFI</code> + <code>Macintosh HD</code> + <code>Windows HD</code>），因此下面的所有描述都是在单硬盘双系统的情况下，可能遇到问题和相应解法。</p>
<h3 id="boot-camp-死活装不上">Boot Camp 死活装不上</h3>
<p>当我定制好了 ACPI 和 SMBIOS，满怀欣喜地引导到 Windows 时，突然发现自己准备好的 Boot Camp 安装包无法完成安装，提示我不支持在这台机器上安装。</p>
<p>难道没有被识别为 Mac？</p>
<p>于是打开 AIDA64，看了一眼，果然概览还是显示为 MSI，而不是 iMac19,1。那么问题肯定就处在 SMBIOS 身上了。仔细地排查了一下机型信息，发现并没有哪里填的不对。后来看了一眼官方文档才知道，原来从 OpenCore 0.5.8 开始，把 <code>UpdateSMBIOSMode</code> 设置为 <code>Custom</code>，所填写的 SMBIOS 信息就不会被应用到 Windows 了。于是改回 <code>Create</code>，让 OpenCore 自己根据 <code>Generic</code> 里填写的必要信息生成一套齐全的 SMBIOS，果然成功安装。</p>
<p>在这里值得一提的是：当你把 UUID 填写为主板本身的 UUID 时，因为某些主板本身的 UUID 可能错的、不是随机生成的，Mac 下通过 Hackintool 查看会发现，<code>系统 ID</code>（也就是 <code>system-id</code>）可能会显示为 <code>???</code>，但目前就我本人的体验来看，并没有什么实质性的影响。</p>
<h3 id="boot-camp-安装旷日持久甚至卡死">Boot Camp 安装旷日持久，甚至卡死</h3>
<p>看起来像是卡死了，实际上只是在原地待命，因为没有提前把不需要的驱动程序从大礼包中删掉，Boot Camp 不认识这台设备——「这不是我认识的那个 Mac！」。因此只需要删掉不需要的驱动即可。</p>
<ul>
<li>如果你有 Apple 的拆机无线卡，<code>$WinPEDriver$</code> 文件夹中，除了 <code>AppleBluetoothBroadcom</code>, <code>BroadcomWireless</code>, <code>BroadcomBluetooth</code> 之外，其他都可以删掉。</li>
<li><code>BootCamp\Drivers</code> 里面的文件，<code>Apple</code> 不要删；如果有 Apple 的拆机卡， <code>Broadcom\BroadcomBluetooth</code> 也不要删。</li>
</ul>
<h3 id="mac-下的更改启动磁盘时报错">Mac 下的更改启动磁盘时报错</h3>
<p>更改启动磁盘时，有时会出现 <strong>Bless 工具无法设定当前的启动磁盘</strong> 的错误提示，确保 <code>AdviseWindows</code> 和 <code>WriteFlash</code> 设置为 <code>True</code>，一般来说后者是引起这个问题的主要因素。</p>
<h3 id="mac-下的启动磁盘不显示-windows-分区">Mac 下的启动磁盘不显示 Windows 分区</h3>
<p>原因是你可能使用了第三方 NTFS 插件，比如 Tuxera 等，它会把 Windows NT 系统改为 <strong>Windows NT 系统（Tuxera）</strong>，macOS 自然也不会识别这种文件系统类型。</p>
<h3 id="windows-下的启动转换助理不显示-mac-分区">Windows 下的启动转换助理不显示 Mac 分区</h3>
<p>Boot Camp 的版本可能已经过时了，更新到最新版本应该就可以了。</p>
<h3 id="boot-camp-中-windows-分区显示为-basic-data-partition">Boot Camp 中 Windows 分区显示为 Basic data partition</h3>
<p>一般来讲，Windows 都是单独安装的，而 Boot Camp 是使用 GPT 分区表获取每个引导选项的名称的，因此也需要手动重新标记 Windows 分区。具体可参考<a class="link" href="https://oc.skk.moe/12-troubleshooting.html#3-%e4%b8%ba%e4%bb%80%e4%b9%88%e6%88%91%e4%bc%9a%e5%9c%a8-Boot-Camp-%e5%90%af%e5%8a%a8%e7%a1%ac%e7%9b%98-%e6%8e%a7%e5%88%b6%e9%9d%a2%e6%9d%bf-%e4%b8%ad%e7%9c%8b%e5%88%b0-Basic-data-partition%ef%bc%9f"  target="_blank" rel="noopener"
    >这个段落</a>。</p>
<h3 id="opencore-启动菜单里没有-windows-选项">OpenCore 启动菜单里没有 Windows 选项！</h3>
<p>首先确保安装 Windows 时不是 MBR(legacy) 安装的，因为 OpenCore 只支持基于 UEFI 安装的 Windows。</p>
<p>然后查看一下 <code>ScanPolicy</code> 是否已经设置为 <code>0</code>，或其他能够识别到 Windows 文件系统和所在磁盘的类型的值。（一般来说设置为 <code>0</code> 比较省事，如果想要精简也可以自己调整）</p>
<p>OpenCore 从 0.5.9 开始使用了全新的启动管理，到此为止就可以自动识别到 Windows 分区了；0.5.8 及更老的版本还需要在 <code>BlessOverride</code> 中设置 <code>bootmgfw.efi</code> 的路径。</p>
<h3 id="windows-蓝屏了">Windows 蓝屏了！！</h3>
<p>常见的错误代码可能是 <code>0xc000000d</code>，一般都是 config 没有配置好导致的。看看 <code>SyncRuntimePermissions</code> 有没有启用。新主板可能还要启用 <code>ProtectUefiServices</code>，13 年以前的主板可能要启用 <code>ProtectMemoryRegions</code>。</p>
<h3 id="d-不见了">D:\ 不见了！！！</h3>
<p>原生的 Boot Camp 的逻辑是，创建一个 D 盘分区作为安装目录，把 Windows 安装到 C 盘，成功安装后 D 盘就功成身退。尽管你不是通过 Boot Camp 安装的 Windows，但当你有多个分区的时候，你的下一个分区依然会被 Boot Camp 误认为是安装目录了。解决这个的办法很简单，用 <strong>傲梅分区助手</strong> 把 D 盘取消隐藏即可。</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-time">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span class="article-time--modified">
            最后更新于 Jun 21, 2020
        </span>
    </section></footer>

    
</article>

    <aside class="related-contents--wrapper">
    
    
</aside>

     
     
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2014 - 
        
        2021 Void Space
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="2.4.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">目录</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ul>
    <li><a href="#用-opencore-引导有什么弊端">用 OpenCore 引导有什么弊端？</a></li>
    <li><a href="#为什么不用-boot-menu-引导-windows">为什么不用 Boot Menu 引导 Windows？</a></li>
    <li><a href="#折腾-boot-camp-的时候有那些坑">折腾 Boot Camp 的时候有那些坑？</a>
      <ul>
        <li><a href="#boot-camp-死活装不上">Boot Camp 死活装不上</a></li>
        <li><a href="#boot-camp-安装旷日持久甚至卡死">Boot Camp 安装旷日持久，甚至卡死</a></li>
        <li><a href="#mac-下的更改启动磁盘时报错">Mac 下的更改启动磁盘时报错</a></li>
        <li><a href="#mac-下的启动磁盘不显示-windows-分区">Mac 下的启动磁盘不显示 Windows 分区</a></li>
        <li><a href="#windows-下的启动转换助理不显示-mac-分区">Windows 下的启动转换助理不显示 Mac 分区</a></li>
        <li><a href="#boot-camp-中-windows-分区显示为-basic-data-partition">Boot Camp 中 Windows 分区显示为 Basic data partition</a></li>
        <li><a href="#opencore-启动菜单里没有-windows-选项">OpenCore 启动菜单里没有 Windows 选项！</a></li>
        <li><a href="#windows-蓝屏了">Windows 蓝屏了！！</a></li>
        <li><a href="#d-不见了">D:\ 不见了！！！</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
